{"version":3,"sources":["admin/components/Footer/index.js","admin/AdminMenu.js","admin/components/NavLeft/index.js","admin/components/Header/index.js","admin/index.js"],"names":["Footer","className","React","Component","AdminMenu","SubMenu","MenuItem","Item","NavLeft","state","handleSelect","item","key","dispatch","props","title","changeMenu","setState","menuPath","renderMenu","data","map","children","type","icon","name","path","to","menu","this","window","location","href","src","theme","selectedKeys","onSelect","connect","Header","hanldeLogout","confirm","content","okText","cancelText","onOk","logout","onClick","overlay","trigger","e","preventDefault","userInfo","Sider","Content","Admin","startNotice","document","getElementById","play","stopNotice","pause","handleGoodInfo","goodId","history","push","pathname","handleOnMessage","message","substring","lastIndexOf","onCancel","JSON","stringify","width","style","padding","margin","menuName","url","onMessage","onOpen","handleOpen","onClose","handleClose","withRouter"],"mappings":"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","file":"static/js/4.f0c0e9e8.chunk.js","sourcesContent":["import React from 'react';\r\nimport './index.less'\r\n\r\nexport default class Footer extends React.Component{\r\n\r\n    render(){\r\n        return(\r\n            <div className=\"footer\">\r\n                版权所有：312885991@qq.com（推荐使用谷歌浏览器，可以获得更佳操作页面体验） 技术支持：别回头丶\r\n            </div>\r\n        )\r\n    }\r\n}","const AdminMenu = [\r\n    {\r\n        \"id\":1,\r\n        \"name\":\"首页\",\r\n        \"path\":\"/admin/home\",\r\n        \"icon\":\"home\"\r\n    },\r\n    {\r\n        \"id\":2,\r\n        \"name\":\"轮播图管理\",\r\n        \"path\":\"/admin/picture\",\r\n        \"icon\":\"picture\"\r\n    },\r\n    {\r\n        \"id\":3,\r\n        \"name\":\"公告管理\",\r\n        \"path\":\"/admin/announce\",\r\n        \"icon\":\"notification\"\r\n    },\r\n    {\r\n        \"id\":4,\r\n        \"name\":\"商品管理\",\r\n        \"path\":\"/admin/good\",\r\n        \"icon\":\"gift\"\r\n    },\r\n    {\r\n        \"id\":5,\r\n        \"name\":\"评论管理\",\r\n        \"path\":\"/admin/discuss\",\r\n        \"icon\":\"message\"\r\n    },\r\n    {\r\n        \"id\":6,\r\n        \"name\":\"用户管理\",\r\n        \"path\":\"/admin/user\",\r\n        \"icon\":\"user\"\r\n    },\r\n    {\r\n        \"id\":7,\r\n        \"name\":\"系统管理\",\r\n        \"path\":\"/admin/manager\",\r\n        \"icon\":\"setting\",\r\n        \"children\":[\r\n            {\r\n                \"id\":8,\r\n                \"name\":\"小程序管理员\",\r\n                \"path\":\"/admin/manager/information\"\r\n            },\r\n            {\r\n                \"id\":9,\r\n                \"name\":\"账号管理\",\r\n                \"path\":\"/admin/manager/account\"\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        \"id\":10,\r\n        \"name\":\"密码修改\",\r\n        \"path\":\"/admin/modifyPassword\",\r\n        \"icon\":\"lock\"\r\n    }\r\n]\r\n\r\nexport default AdminMenu","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Menu, Icon } from 'antd';\r\nimport AdminMenu from '../../AdminMenu'\r\nimport { connect } from 'react-redux';\r\nimport { changeMenu } from '../../../redux/action'\r\nimport './index.less'\r\nconst { SubMenu } = Menu;\r\nconst MenuItem = Menu.Item;\r\n\r\nclass NavLeft extends React.Component{\r\n\r\n    state = {}\r\n\r\n    componentWillMount(){\r\n        const menu = this.renderMenu(AdminMenu);\r\n        const menuPath = window.location.href;\r\n        this.setState({\r\n            menu,\r\n            menuPath\r\n        })\r\n    }\r\n\r\n    handleSelect = ({ item, key }) => {\r\n        const { dispatch } = this.props;\r\n        const title = item.props.title;\r\n        dispatch(changeMenu(title))\r\n        this.setState({\r\n            menuPath:key\r\n        })\r\n    }\r\n\r\n    renderMenu = (data) => {\r\n        return data.map((item)=>{\r\n            if(item.children){\r\n                return (\r\n                    <SubMenu title={\r\n                        <span>\r\n                            <Icon type={item.icon} />\r\n                            <span>{item.name}</span>\r\n                        </span>\r\n                    } \r\n                        key={item.path}\r\n                    >\r\n                        { this.renderMenu(item.children) }\r\n                    </SubMenu>\r\n                )\r\n            }\r\n            return (\r\n                <MenuItem title={item.name} key={item.path}>\r\n                    <Link to={item.path}>\r\n                        {item.icon?<Icon type={item.icon}/>:''}{item.name}\r\n                    </Link>\r\n                </MenuItem>\r\n            )\r\n        })\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div>\r\n                <div className=\"logo\">\r\n                    <img src=\"/assets/logo.svg\" />\r\n                    <h1>校园闲置平台</h1>\r\n                </div>\r\n                <Menu\r\n                    theme=\"dark\"\r\n                    selectedKeys={this.state.menuPath}\r\n                    onSelect={this.handleSelect}\r\n                >\r\n                    { this.state.menu } \r\n                </Menu>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect()(NavLeft);","import React from 'react';\r\nimport './index.less'\r\nimport { connect } from 'react-redux';\r\nimport { logout } from '../../../redux/action'\r\nimport { Icon, Dropdown, Menu, Modal } from 'antd';\r\n\r\nclass Header extends React.Component {\r\n\r\n    hanldeLogout = () => {\r\n        const { dispatch } = this.props;\r\n        Modal.confirm({\r\n            title:'提示',\r\n            content:'确认要退出么？',\r\n            okText:'确认',\r\n            cancelText:'返回',\r\n            onOk:()=>{\r\n                dispatch(logout());\r\n                window.location.href='/user/login'\r\n            }\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const menu = (\r\n            <Menu>\r\n                <Menu.Item>\r\n                    <span onClick={this.hanldeLogout}>\r\n                        <Icon type=\"logout\" />退出\r\n                    </span>\r\n                </Menu.Item>\r\n            </Menu>\r\n        )\r\n        return (\r\n            <div className=\"header\">\r\n                <Icon type=\"bell\" />\r\n                <Dropdown overlay={menu} trigger={['click', 'hover']}>\r\n                    <a onClick={e=> e.preventDefault()}>\r\n                        {this.props.userInfo.name||'别回头丶'} <Icon type=\"down\" />\r\n                    </a>\r\n                </Dropdown>,\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        userInfo:state.userInfo\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Header)","import React from 'react';\r\nimport { Layout, Breadcrumb, Modal } from 'antd';\r\nimport NavLeft from './components/NavLeft'\r\nimport MineHeader from './components/Header'\r\nimport MineFooter from './components/Footer'\r\nimport './index.less'\r\nimport { connect } from 'react-redux';\r\nimport WebSocket from 'react-websocket';\r\nimport { withRouter} from 'react-router-dom'\r\nconst { Header, Sider, Content, Footer } = Layout;\r\n\r\nclass Admin extends React.Component{\r\n\r\n    constructor(props){\r\n        super(props)\r\n        const userInfo = this.props.userInfo;\r\n        if(JSON.stringify(userInfo) === '{}'){\r\n            window.location.href = '/user/login'\r\n        }\r\n    }\r\n\r\n    startNotice = () => {\r\n        const notice = document.getElementById(\"notice\");\r\n        notice.play();\r\n    }\r\n\r\n    stopNotice = () => {\r\n        const notice = document.getElementById(\"notice\");\r\n        notice.pause();\r\n    }\r\n\r\n    handleGoodInfo = (goodId) => {\r\n        this.stopNotice();\r\n        // console.log(this.props.history)\r\n        this.props.history.push({pathname:'/admin/good/goodInfo/' + goodId});\r\n    }\r\n\r\n    // handleOpen = () => {\r\n    //     console.log(\"连接成功\")\r\n    // }\r\n\r\n    handleOnMessage = (message) => {\r\n        this.startNotice();\r\n        // console.log(message)\r\n        const goodId = message.substring(message.lastIndexOf(\":\")+1);\r\n        // console.log(goodId);\r\n        Modal.confirm({\r\n            title:'新增商品提示',\r\n            content:'您有新的商品需要审核，请注意查看！',\r\n            okText:'查看详情',\r\n            cancelText:'关闭',\r\n            onOk:()=>{this.handleGoodInfo(goodId)},\r\n            onCancel:()=>{\r\n                this.stopNotice();\r\n            }\r\n        })\r\n    }\r\n\r\n    // handleClose = () => {\r\n    //     console.log(\"连接断开\")\r\n    // }\r\n\r\n    render(){\r\n        return(\r\n            <div className=\"admin-container\">\r\n                <Layout>\r\n                    <Sider\r\n                        // breakpoint=\"md\"\r\n                        // collapsedWidth=\"0\" \r\n                        width={215} \r\n                        className=\"nav-left\"\r\n                    >\r\n                        <NavLeft />\r\n                    </Sider>\r\n                    <Layout className=\"main\">\r\n                        <Header style={{padding:0}}>\r\n                            <MineHeader />\r\n                        </Header>\r\n                        <Content className=\"content\">\r\n                            <Breadcrumb style={{margin:'16px 0'}}>\r\n                                <Breadcrumb.Item>校园闲置平台</Breadcrumb.Item>\r\n                                <Breadcrumb.Item>{this.props.menuName||'首页'}</Breadcrumb.Item>\r\n                            </Breadcrumb>\r\n                            { this.props.children }\r\n                        </Content>\r\n                        <Footer>\r\n                            <MineFooter />\r\n                        </Footer>\r\n                    </Layout>\r\n                </Layout>\r\n                <WebSocket url=\"wss:quicklyweb.cn/webSocket\" onMessage={this.handleOnMessage} onOpen={this.handleOpen} onClose={this.handleClose}/>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        menuName: state.menuName,\r\n        userInfo: state.userInfo\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps)(Admin))"],"sourceRoot":""}